<!-- Content managed by Project Forge, see [projectforge.md] for details. -->
{% import (
  "strings"

  "projectforge.dev/projectforge/app"
  "projectforge.dev/projectforge/app/controller/cutil"
  "projectforge.dev/projectforge/app/util"
  "projectforge.dev/projectforge/views/components"
) %}

{% func Help(as *app.State, ps *cutil.PageState) %}
  {%- if as.Services.Help != nil -%}
  {%- if hlp := as.Services.Help.Entry(ps.Action); hlp != nil -%}
  {%- code
    title := hlp.Title
    if title == "" {
      title = ps.Title
    }
    if title == "" {
      title = util.AppName
    }
  -%}
  <a class="help-link" title="Help for this page" data-key="{%s strings.TrimSuffix(ps.Action, `.action`) %}" href="#help">{%= components.SVGRef(`question`, 24, 24, ``, ps) %}</a>
  <div id="help" class="modal" style="display: none;">
    <a class="backdrop" href="#"></a>
    <div class="modal-content">
      <div class="modal-header">
        <a href="#" class="modal-close">Ã—</a>
        <h3>{%= components.SVGRefIcon(`question`, ps) %}Help: {%s title %}</h3>
      </div>
      <div class="modal-body">
        {%s= hlp.HTML %}
      </div>
    </div>
  </div>
  {%- endif -%}
  {%- endif -%}
{% endfunc %}
